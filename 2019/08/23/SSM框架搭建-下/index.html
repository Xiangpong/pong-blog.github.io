<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hexo 3.9.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>SSM框架搭建-下 | 鸡同鸭讲</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/8.0.1/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/3.4.0/jquery.min.js"></script><link rel="icon" mask sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">SSM框架搭建-下</h1><a id="logo" href="/.">鸡同鸭讲</a><p class="description">贵贱在自身，高低看用心</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 主页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> RSS</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">SSM框架搭建-下</h1><div class="post-meta">Aug 23, 2019<span> | </span><span class="category"><a href="/categories/学习笔记/">学习笔记</a></span></div><div class="post-content"><p>前边我们完成了SSM框架搭建的第一步：Spring和SpringMVC的整合。接下来实现将Mybatis整合到两者之间去，即实现与数据库的交互。</p>
<p>与数据库的交互无非是常用的“增删改查”等操作。这就是项目开发中重复且枯燥的部分，所以我们用到了Mybatis的逆向工程，来简化这一步骤。</p>
<h3 id="Mybatis的逆向工程"><a href="#Mybatis的逆向工程" class="headerlink" title="Mybatis的逆向工程"></a>Mybatis的逆向工程</h3><blockquote>
<p>MyBatis的一个主要的特点就是需要程序员自己编写sql，那么如果表太多的话，难免会很麻烦，所以mybatis官方提供了一个逆向工程，可以针对单表自动生成mybatis执行所需要的代码（包括mapper.xml、mapper.java、po..）。一般在开发中，常用的逆向工程方式是通过数据库的表生成代码。</p>
</blockquote>
<a id="more"></a>

<p>这里我使用“generatorSqlmapCustom”逆向工程代码<br>来生成Mapper和Pojo文件，用于Spring、Mybatis、数据库的整合</p>
<p>github链接：<a href="https://github.com/Xiangpong/generatorSqlmapCustom" target="_blank" rel="noopener">https://github.com/Xiangpong/generatorSqlmapCustom</a></p>
<p><a href="https://i.loli.net/2019/06/24/5d1079b7ca93e87590.png" target="_blank" rel="noopener"><img src="https://i.loli.net/2019/06/24/5d1079b7ca93e87590.png" alt="逆向工程.png"></a></p>
<p>如上图</p>
<p>将mapper文件夹文件（UserMapper、UserMapper.xml）复制到SSM项目的manager模块的mapper文件夹 → src/main/java/com.pong.mapper 文件夹内</p>
<p>将pojo文件夹文件（User、UserExample）复制到SSM项目的manager模块的pojo文件夹  → src/main/java/com.pong.pojo  文件夹内</p>
<p><a href="https://i.loli.net/2019/06/24/5d1079b7bee4463907.png" target="_blank" rel="noopener"><img src="https://i.loli.net/2019/06/24/5d1079b7bee4463907.png" alt="逆向工程2.png"></a></p>
<p><a href="https://i.loli.net/2019/06/24/5d1079b7bef0071324.png" target="_blank" rel="noopener"><img src="https://i.loli.net/2019/06/24/5d1079b7bef0071324.png" alt="逆向工程3.png"></a></p>
<h4 id="引入jackson-databind依赖进行JSON和Java对象转换"><a href="#引入jackson-databind依赖进行JSON和Java对象转换" class="headerlink" title="引入jackson-databind依赖进行JSON和Java对象转换"></a>引入jackson-databind依赖进行JSON和Java对象转换</h4><h3 id="写一个service-Demo-来检测整合结果"><a href="#写一个service-Demo-来检测整合结果" class="headerlink" title="写一个service Demo 来检测整合结果"></a>写一个service Demo 来检测整合结果</h3><p>关键代码：</p>
<p>UserServiceImpl → UserService接口的实现</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.pong.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.pong.mapper.UserMapper;</span><br><span class="line"><span class="keyword">import</span> com.pong.pojo.User;</span><br><span class="line"><span class="keyword">import</span> com.pong.pojo.UserExample;</span><br><span class="line"><span class="keyword">import</span> com.pong.service.UserService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">getUserById</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">        UserExample userExample = <span class="keyword">new</span> UserExample();</span><br><span class="line">        UserExample.Criteria criteria = userExample.createCriteria();</span><br><span class="line">        criteria.andIdEqualTo(id);</span><br><span class="line"></span><br><span class="line">        List&lt;User&gt; userList = userMapper.selectByExample(userExample);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (userList != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> userList.get(<span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>UserController</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.pong.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.pong.pojo.User;</span><br><span class="line"><span class="keyword">import</span> com.pong.service.UserService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PathVariable;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/user/&#123;userid&#125;"</span>)</span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> User <span class="title">getUserById</span><span class="params">(@PathVariable Integer userid)</span></span>&#123;</span><br><span class="line">            User user = userService.getUserById(userid);</span><br><span class="line">            <span class="keyword">return</span>  user;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="运行测试"><a href="#运行测试" class="headerlink" title="运行测试"></a>运行测试</h3><p><a href="https://i.loli.net/2019/06/24/5d1079b7ca3b728420.png" target="_blank" rel="noopener"><img src="https://i.loli.net/2019/06/24/5d1079b7ca3b728420.png" alt="测试结果2.png"></a></p>
<h3 id="过程中的问题"><a href="#过程中的问题" class="headerlink" title="过程中的问题"></a>过程中的问题</h3><ol>
<li>未引入jackson-databind依赖 </li>
<li>未给UserServiceimpl 添加@Service注解</li>
<li>未给UserController 添加@Controller注解</li>
<li>org.apache.ibatis.binding.BindingException: Invalid bound statement (not found)</li>
</ol>
<h4 id="第四点为关键错误，可以从两个方面排查："><a href="#第四点为关键错误，可以从两个方面排查：" class="headerlink" title="第四点为关键错误，可以从两个方面排查："></a>第四点为关键错误，可以从两个方面排查：</h4><ul>
<li><p>Mapper interface和xml文件的定义对应不上，需要检查包名，namespace，函数名称等能否对应上；因为是用逆向工程生成的文件，所以一般没有错误</p>
</li>
<li><p>mapper没有自动复制到响应位置，也会出错；maven默认会把src/main/resources下的所有配置文件以及src/main/java下的所有java文件打包或发布到target\classes下面，但是现实我们可能会在src/main/java下面也放置一些配置文件如hibernate配置文件或mybatis mapper配置文件等，如果不做一些额外配置，那我们打包后的项目可能找不到这些必须的资源文件，因此在pom.xml中增加类似如下配置：</p>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/java<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/resources<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="SSM框架整合完成"><a href="#SSM框架整合完成" class="headerlink" title="SSM框架整合完成"></a>SSM框架整合完成</h3></div><div class="tags"><a href="/tags/Java/">Java</a><a href="/tags/SSM框架学习/">SSM框架学习</a><a href="/tags/电商项目开发/">电商项目开发</a></div><div class="post-nav"><a class="pre" href="/2019/09/02/浅谈WebSocket/">雷峰塔不是雷锋的塔，WebSocket不是Web的Socket</a><a class="next" href="/2019/08/22/SSM框架搭建-上/">SSM框架搭建-上</a></div></div></div></div><div class="pure-u-1 pure-u-md-1-4"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"><input type="hidden" name="sitesearch" value="http://yoursite.com"></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> Kategorien</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Hexo/">Hexo</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/学习笔记/">学习笔记</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/日记/">日记</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/笔记/">笔记</a><span class="category-list-count">5</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"><a href="/tags/TCP-IP/" style="font-size: 15px;">TCP/IP</a> <a href="/tags/笔记/" style="font-size: 15px;">笔记</a> <a href="/tags/Java/" style="font-size: 15px;">Java</a> <a href="/tags/SSM框架学习/" style="font-size: 15px;">SSM框架学习</a> <a href="/tags/电商项目开发/" style="font-size: 15px;">电商项目开发</a> <a href="/tags/杂记/" style="font-size: 15px;">杂记</a> <a href="/tags/编程/" style="font-size: 15px;">编程</a> <a href="/tags/分享/" style="font-size: 15px;">分享</a> <a href="/tags/网络编程/" style="font-size: 15px;">网络编程</a> <a href="/tags/软考笔记/" style="font-size: 15px;">软考笔记</a> <a href="/tags/AES对称加密/" style="font-size: 15px;">AES对称加密</a> <a href="/tags/WebSocket/" style="font-size: 15px;">WebSocket</a> <a href="/tags/jQuery/" style="font-size: 15px;">jQuery</a> <a href="/tags/前端/" style="font-size: 15px;">前端</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Letzte</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2019/09/05/WebSocket-Aes→实现加密聊天/">WebSocket结合AES算法实现加密聊天</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/09/02/浅谈WebSocket/">雷峰塔不是雷锋的塔，WebSocket不是Web的Socket</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/08/23/SSM框架搭建-下/">SSM框架搭建-下</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/08/22/SSM框架搭建-上/">SSM框架搭建-上</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/06/21/从0到1开发Java高并发SSM项目目/">从0到1开发Java高并发SSM项目（序）</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/06/06/多线程与Java/">多线程与Java</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/04/16/程序设计语言言/">程序设计语言言学习笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/04/01/在Github上备份Hexo原码/">在Github上备份Hexo原码</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/03/26/python入门/">Python基础入门</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/03/02/操作系统学习笔记/">操作系统原理学习笔记</a></li></ul></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2019 <a href="/." rel="nofollow">鸡同鸭讲.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>